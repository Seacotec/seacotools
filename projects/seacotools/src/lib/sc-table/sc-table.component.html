<div class="relative overflow-x-auto" [ngClass]="config.containerClass">
  <table
    [class]="textClass + ' w-full text-sm text-left rtl:text-right'"
    [ngClass]="{
      'text-gray-600 dark:text-gray-300': !config.textClass
    }"
  >
    <!-- Header Section -->
    <thead
      class="text-xs capitalize"
      [ngClass]="headerClass"
    >
    <tr>
      <th
        *ngFor="let column of columns"
        scope="col"
        class="px-6 py-2.5"
      >
        <div class="" [ngClass]="column.headerClass">
          <span>{{ column.label }}</span>
          @if (column.sortable) {
            @if (currentSortField !== column.field || currentSortDirection === 'asc') {
              <sc-icon name="arrow-down-circle"
                       appearance="outline"
                       class="ml-1 w-4 inline-block"
                       [tp]="currentSortField !== column.field ? 'Sort ascending' : 'Sort descending'"
                       [ngClass]="currentSortField === column.field ? 'text-blue-800 dark:text-yellow-200' : 'text-gray-400 dark:text-gray-500'"
                       (click)="sortData(column)"
              ></sc-icon>
            } @else {
              <sc-icon name="arrow-up-circle"
                       appearance="outline"
                       class="ml-1 w-4 inline-block"
                       tp="Sort ascending"
                       [ngClass]="currentSortField === column.field ? 'text-blue-800 dark:text-yellow-200' : 'text-gray-400 dark:text-gray-500'"
                       (click)="sortData(column)"
              ></sc-icon>
            }
          }
        </div>

      </th>
    </tr>
    </thead>

    <!-- Body Section -->
    <tbody>
    <ng-container *ngIf="data?.length; else noDataTemplate">
      <tr
        *ngFor="let row of data; let i = index"
        [class]="rowClass + ' ' + rowBorderClass"
        [ngClass]="{ 'border-b': true }"
      >
        <td
          *ngFor="let column of columns"
          class="px-6 py-2"
          [ngClass]="column.cellClass || ''"
        >
          <ng-container *ngIf="column.template">
            <ng-container
              *ngTemplateOutlet="column.template; context: { $implicit: row, index: i }"
            ></ng-container>
          </ng-container>
          <ng-container *ngIf="!column.template">{{ row[column.field] }}</ng-container>
        </td>
      </tr>
    </ng-container>
    </tbody>
  </table>
</div>

<ng-template #noDataTemplate>
  <div
    [class]="config.noDataClass || 'py-4 text-center text-sm text-gray-500 dark:text-gray-400'"
  >
    {{ config.noDataMessage || 'No data available' }}
  </div>
</ng-template>
